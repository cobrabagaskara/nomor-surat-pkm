<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nomor Surat Bersama</title>

  <!-- Style sederhana, fokus mobile -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 16px;
      color: #111;
    }

    h1 {
      text-align: center;
      margin-bottom: 16px;
    }

    .top-controls {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .top-controls label {
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
    }

    select, input {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .card {
      background: #fff;
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .card-header h2 {
      margin: 0;
    }

    .set-number {
      font-size: 14px;
      color: #0066cc;
      cursor: pointer;
    }

    .add-btn {
      width: 100%;
      height: 70px;
      font-size: 36px;
      font-weight: bold;
      border-radius: 12px;
      border: none;
      background: #2563eb;
      color: white;
      cursor: pointer;
    }

    .add-btn:disabled {
      background: #a5b4fc;
      cursor: not-allowed;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
      font-size: 14px;
    }

    th, td {
      padding: 8px;
      border-bottom: 1px solid #eee;
      text-align: left;
    }

    th {
      background: #f9fafb;
      font-weight: 600;
    }

    .note {
      margin-top: 24px;
      text-align: center;
      font-size: 13px;
      color: #555;
    }

    /* Modal sederhana */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
    }

    .modal-content h3 {
      margin-top: 0;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .btn {
      padding: 10px 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: #2563eb;
      color: #fff;
    }

    .btn-secondary {
      background: #e5e7eb;
    }
  </style>
</head>
<body>

  <h1>NOMOR SURAT BERSAMA</h1>

  <!-- Kontrol atas -->
  <div class="top-controls">
    <label>Ruang Pengguna</label>
    <select id="ruangSelect">
      <option value="">— Pilih Ruang —</option>
      <option value="R1">R1</option>
      <option value="R2">R2</option>
      <option value="R3">R3</option>
    </select>

    <label>Bulan (Romawi)</label>
    <input type="text" id="bulan" value="II">

    <label>Tahun</label>
    <input type="number" id="tahun" value="2026">
  </div>

  <!-- Kartu -->
  <div class="cards">

    <!-- SKB -->
    <div class="card">
      <div class="card-header">
        <h2>SKB</h2>
        <span class="set-number" onclick="openModal('SKB')">Set Nomor</span>
      </div>

      <button class="add-btn" id="btnSKB" disabled>+</button>

      <table>
        <thead>
          <tr>
            <th>No</th>
            <th>Nomor Surat Lengkap</th>
            <th>Ruang</th>
            <th>Jam</th>
          </tr>
        </thead>
        <tbody id="tableSKB">
          <!-- data -->
        </tbody>
      </table>
    </div>

    <!-- KEUR -->
    <div class="card">
      <div class="card-header">
        <h2>KEUR</h2>
        <span class="set-number" onclick="openModal('KEUR')">Set Nomor</span>
      </div>

      <button class="add-btn" id="btnKEUR" disabled>+</button>

      <table>
        <thead>
          <tr>
            <th>No</th>
            <th>Nomor Surat Lengkap</th>
            <th>Ruang</th>
            <th>Jam</th>
          </tr>
        </thead>
        <tbody id="tableKEUR">
          <!-- data -->
        </tbody>
      </table>
    </div>

  </div>

  <div class="note">
    Nomor diberikan oleh sistem • Jangan refresh saat klik
  </div>

  <!-- Modal Set Nomor -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h3 id="modalTitle"></h3>

      <label>Nomor terakhir yang sudah digunakan</label>
      <input type="number" id="lastNumberInput">

      <p style="font-size:13px;color:#555;">
        Nomor berikutnya akan dimulai dari <strong id="nextPreview"></strong>
      </p>

      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeModal()">Batal</button>
        <button class="btn btn-primary">Simpan</button>
      </div>
    </div>
  </div>

  <!-- Script non-teknis (placeholder Firebase) -->
  <script>
    const ruangSelect = document.getElementById('ruangSelect');
    const btnSKB = document.getElementById('btnSKB');
    const btnKEUR = document.getElementById('btnKEUR');

    ruangSelect.addEventListener('change', () => {
      const enabled = ruangSelect.value !== '';
      btnSKB.disabled = !enabled;
      btnKEUR.disabled = !enabled;
    });

    function openModal(type) {
      document.getElementById('modalTitle').innerText =
        `Nomor Terakhir ${type}`;
      document.getElementById('modal').style.display = 'flex';
      document.getElementById('lastNumberInput').value = '';
      document.getElementById('nextPreview').innerText = '—';
    }

    function closeModal() {
      document.getElementById('modal').style.display = 'none';
    }

    document.getElementById('lastNumberInput').addEventListener('input', e => {
      const val = parseInt(e.target.value || 0, 10) + 1;
      document.getElementById('nextPreview').innerText =
        String(val).padStart(5, '0');
    });
  </script>

</body>
</html>
