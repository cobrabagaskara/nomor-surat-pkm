<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Nomor Surat Pasien V2.3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="header-container">
  <h1>Nomor Surat Pasien</h1>
  <span class="settings-icon" onclick="toggleSettings()">âš™ï¸</span>
  <button class="refresh-btn" onclick="loadAllData()" title="Refresh data">ğŸ”„</button>
</div>
<p class="subtitle">Sistem penomoran surat bersama lintas ruang</p>

<!-- Input Ruang -->
<div class="card">
  <select id="ruang">
    <option value="">Pilih Ruang</option>
    <option>R1</option>
    <option>R2</option>
    <option>R3</option>
    <option>R4</option>
    <option>R5</option>
  </select>
  <div class="button-group">
    <button class="btn-small btn-skb" onclick="generateNumber('SKB')">+ SKB</button>
    <button class="btn-small btn-keur" onclick="generateNumber('KEUR')">+ KEUR</button>
  </div>
</div>

<!-- Settings Panel -->
<div id="settingsPanel" class="card" style="display:none;">
  <h3>Pengaturan</h3>
  
  <h4>Nomor Awal</h4>
  <input id="initSKB" placeholder="Nomor terakhir SKB (misal 100)" type="number">
  <button class="btn-small" onclick="setInitial('SKB')">Simpan SKB</button>
  <br><br>
  <input id="initKEUR" placeholder="Nomor terakhir KEUR (misal 50)" type="number">
  <button class="btn-small" onclick="setInitial('KEUR')">Simpan KEUR</button>
  
  <hr class="divider">
  
  <h4>Bulan & Tahun</h4>
  <input id="bulan" placeholder="Bulan Romawi">
  <input id="tahun" placeholder="Tahun" type="number">
  
  <div class="settings-buttons">
    <button class="btn-small" onclick="resetLocalData()">Reset Cache</button>
    <button class="btn-small btn-purple" onclick="createFirestoreIndex()">Buat Index</button>
  </div>
</div>

<!-- Tabs -->
<div class="tabs">
  <button class="tab active" onclick="switchTab('SKB')">
    SKB <span id="skbCount" class="counter-badge">0</span>
  </button>
  <button class="tab" onclick="switchTab('KEUR')">
    KEUR <span id="keurCount" class="counter-badge">0</span>
  </button>
</div>

<!-- SKB Tab Content -->
<div id="SKB" class="tab-content active card">
  <h3 class="tab-title">Surat Keterangan Berperilaku (SKB)</h3>
  <table id="tableSKB">
    <thead>
      <tr>
        <th>Nomor Surat</th>
        <th>Ruang</th>
        <th>Waktu</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="3" class="loading">Memuat data SKB...</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- KEUR Tab Content -->
<div id="KEUR" class="tab-content card">
  <h3 class="tab-title">Surat Keterangan Untuk Rawat (KEUR)</h3>
  <table id="tableKEUR">
    <thead>
      <tr>
        <th>Nomor Surat</th>
        <th>Ruang</th>
        <th>Waktu</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="3" class="loading">Memuat data KEUR...</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Toast Notification -->
<div id="toast"></div>


<!-- Scripts -->
<script type="module" src="firebase-config.js"></script>
<script type="module" src="modules/toast.js"></script>
<script type="module" src="modules/utils.js"></script>
<script type="module" src="app.js"></script>
</body>
</html>
